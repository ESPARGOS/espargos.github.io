{{ $channel := .Get "channel" | default "latest" }}
{{ $field := .Get "field" | default "build_version" }}
{{ $artifactName := .Get "artifact" | default "espargos-controller-artifact.json" }}
{{ $artifactPath := printf "content/firmware/%s/%s" $channel $artifactName }}
{{ $raw := readFile $artifactPath }}
{{ $data := $raw | transform.Unmarshal }}
{{ if and $data (eq $field "build_date") }}
	{{ with $data.build_date }}{{ dateFormat "2006-01-02 15:04 MST" . }}{{ else }}TBD{{ end }}
{{ else if and $data (eq $field "build_version") }}
	{{ with $data.build_version }}{{ . }}{{ else }}TBD{{ end }}
{{ else }}
	TBD
{{ end }}